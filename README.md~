# ShortBeyond API â€“ Test Automation

Este repositÃ³rio contÃ©m a **estrutura de testes automatizados** da **ShortBeyond API**, uma API RESTful para encurtamento de URLs, desenvolvida em Go e utilizada no Projeto **TestBeyond**.

O foco deste projeto Ã© demonstrar **boas prÃ¡ticas em automaÃ§Ã£o de testes de API**, organizaÃ§Ã£o de cÃ³digo, reutilizaÃ§Ã£o de dados de teste e facilidade de onboarding.

---

## ğŸ“Œ Sobre a API

A ShortBeyond API permite:

* Cadastro e autenticaÃ§Ã£o de usuÃ¡rios
* CriaÃ§Ã£o e gerenciamento de links encurtados
* Redirecionamento a partir de cÃ³digos curtos

> API exclusiva para alunos dos cursos do **Projeto TestBeyond** â˜•ğŸ’›

---

## ğŸ› ï¸ Tecnologias Utilizadas

* **Node.js** (ambiente de execuÃ§Ã£o dos testes)
* **Playwright** (test runner e assertions)
* **TypeScript** (tipagem e organizaÃ§Ã£o)
* **Bruno** (testes manuais e exploraÃ§Ã£o de API)
* **Podman** (containerizaÃ§Ã£o da API)
* **Mermaid** (diagrama de arquitetura)

---

## ğŸš€ InstalaÃ§Ã£o e ConfiguraÃ§Ã£o

### 1ï¸âƒ£ PrÃ©-requisitos

* Node.js 18+
* Podman
* Bruno CLI

---

### 2ï¸âƒ£ Clonando o repositÃ³rio

```bash
git clone https://github.com/seu-usuario/shortbeyond-api-tests.git
cd shortbeyond-api-tests
```

---

### 3ï¸âƒ£ Instalando dependÃªncias

```bash
npm install
```

---

### 4ï¸âƒ£ Subindo a API com Podman

```bash
podman-compose up -d
```

A API ficarÃ¡ disponÃ­vel em:

```
http://localhost:3333/api
```

---

### 5ï¸âƒ£ Executando os testes

```bash
npx playwright test
```

Para modo interativo:

```bash
npx playwright test --ui
```

---

## ğŸ“‚ Estrutura do Projeto

```text
.
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ login.spec.ts
â”‚   â”‚   â””â”€â”€ register.spec.ts
â”‚   â”œâ”€â”€ links/
â”‚   â”‚   â”œâ”€â”€ create-link.spec.ts
â”‚   â”‚   â”œâ”€â”€ list-links.spec.ts
â”‚   â”‚   â””â”€â”€ delete-link.spec.ts
â”‚   â””â”€â”€ redirect/
â”‚       â””â”€â”€ redirect.spec.ts
â”‚
â”œâ”€â”€ factories/
â”‚   â”œâ”€â”€ user.factory.ts
â”‚   â””â”€â”€ link.factory.ts
â”‚
â”œâ”€â”€ fixtures/
â”‚   â””â”€â”€ api.fixture.ts
â”‚
â”œâ”€â”€ helpers/
â”‚   â””â”€â”€ auth.helper.ts
â”‚
â”œâ”€â”€ playwright.config.ts
â””â”€â”€ README.md
```

---

## â­ Destaques da Arquitetura de Testes

* **Factories**: responsÃ¡veis por gerar dados de teste de forma consistente e reutilizÃ¡vel (usuÃ¡rios, links, payloads de API).
* **Fixtures**: controlam o setup e teardown dos testes, incluindo autenticaÃ§Ã£o, headers comuns e preparaÃ§Ã£o de contexto.
* **Services**: camada que encapsula chamadas HTTP para a API (ex: AuthService, LinksService), evitando duplicaÃ§Ã£o de lÃ³gica nos testes.
* **Database**: utilitÃ¡rios para manipulaÃ§Ã£o direta da base de dados em cenÃ¡rios de teste (ex: limpeza de dados, preparaÃ§Ã£o de massa).
* **E2E (End-to-End)**: testes que validam fluxos completos do sistema, cobrindo desde a criaÃ§Ã£o do usuÃ¡rio atÃ© o redirecionamento do link encurtado.

### ğŸ§ª Fixtures

* Centralizam setup e teardown
* Reutilizam autenticaÃ§Ã£o e contexto de API
* Reduzem duplicaÃ§Ã£o de cÃ³digo

### ğŸ­ Factories

* Geram dados dinÃ¢micos e vÃ¡lidos
* Facilitam criaÃ§Ã£o de usuÃ¡rios e links
* Tornam os testes mais legÃ­veis e previsÃ­veis

---

## ğŸ§ª Exemplo de Teste Automatizado

```ts
import { test, expect } from '@playwright/test';
import { createUser } from '../factories/user.factory';

test('deve criar um usuÃ¡rio com sucesso', async ({ request }) => {
  const user = createUser();

  const response = await request.post('/auth/register', {
    data: user,
  });

  expect(response.status()).toBe(201);
});
```

**O que este teste demonstra:**

* Uso de factory para dados de entrada
* Teste independente e legÃ­vel
* ValidaÃ§Ã£o direta da API

---

## ğŸ“ Diagrama de Arquitetura

```mermaid
graph TD
    Tests[Testes Automatizados]
    Fixtures[Fixtures]
    Factories[Factories]
    API[ShortBeyond API]
    DB[(Database)]

    Tests --> Fixtures
    Tests --> Factories
    Fixtures --> API
    API --> DB
```

---

## ğŸ” Endpoints Cobertos

### AutenticaÃ§Ã£o

* `POST /auth/register`
* `POST /auth/login`

### Links

* `POST /links`
* `GET /links`
* `DELETE /links/{id}`

### Redirecionamento

* `GET /{code}`

---

## ğŸ“Š DocumentaÃ§Ã£o da API

A documentaÃ§Ã£o OpenAPI estÃ¡ disponÃ­vel em:

```
/docs/api.yaml
```

Pode ser explorada via Swagger UI.

---

## âœ‚ï¸ VersÃ£o Resumida

* Testes de API com Playwright
* Arquitetura limpa com fixtures e factories
* Setup rÃ¡pido com Podman
* README pronto para onboarding

---

## ğŸ¤ ContribuiÃ§Ã£o

Este projeto Ã© educacional. SugestÃµes e melhorias sÃ£o bem-vindas via pull request.

---

Feito com â˜• e ğŸ’› para o Projeto **TestBeyond**
